<div id="invoice-table">
    <table class="table data subtotal" data-control="rowlink">
        <thead>
            <tr>
                <th>Title</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Subtotal</th>
            </tr>
        </thead>
        <tbody>
            <?foreach($invoice['items'] as $item => $attr):?>
                <tr>    
                    <td><?=$attr['product']['title']?></td>
                    
                    <td><input type="number" class="form-control" value="<?=($attr['qty'] > 0) ? $attr['qty'] : '1'?>" min="1" name="qty[<?=$attr['id']?>]"></td>
                    <td><span class="text-info"><?=$attr['product']['price']?></span></td>
                    <td><span class="text-success">$ <?=$attr['subtotal']?></span></td>
                </tr>
            <?endforeach;?>
        </tbody>
        <tfoot id="total">
            <tr class="info">
                <td></td>
                <td></td>
                <td class="subtitle">Subtotal:</td>
                <td>$ <?=$invoice['subtotal']?></td>
            </tr>

            <tr class="danger">
                <td></td>
                <td class="discount">
                    <input type="number" name="discount" value="">
                    <select name="discount_type">
                        <option value="%">%</option>
                        <option value="$">$</option>
                    </select>
                </td>
                <td class="subtitle">Discount:</td>
                <td>$ <?=$invoice['subtotal']?></td>
            </tr>

            <tr class="success">
                <td></td>
                <td>
                    <button
                        type="button"
                        data-request="onRecalculate" 
                        data-request-update="'sale_items_fields': '#invoice-table'"
                        data-hotkey="ctrl+s, cmd+s, enter"
                        class="btn-sm btn-info oc-icon-calculator">
                        Recalculate
                    </button>
                </td>
                <td class="subtitle">Total:</td>
                <td>$ <?=$invoice['subtotal']?></td>
            </tr>
        </tfoot>
    </table>
</div>